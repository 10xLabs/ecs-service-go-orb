description: >
  This command build and push docker image
parameters:
  image-name:
    type: string
    default: ""
  image-tag:
    type: string
    default: ""
  repository:
    type: string
    default: ""
steps:
  - run:
      name: Install AWS CLI
      command: << include(scripts/install_aws_cli.sh) >>
  - run:
      name: Install Docker
      command: << include(scripts/install_docker.sh) >>
  - run:
      name: Build and push docker image
      environment:
        IMAGE_NAME: << parameters.image-name >>
        IMAGE_TAG: << parameters.image-tag >>
        REPOSITORY: << parameters.repository >>
      command: << include(scripts/build_and_push.sh) >>
